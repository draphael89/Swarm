{
  "name": "middleman",
  "private": true,
  "license": "Apache-2.0",
  "packageManager": "pnpm@10.30.1",
  "type": "module",
  "workspaces": [
    "apps/backend",
    "apps/ui",
    "apps/site",
    "packages/protocol"
  ],
  "scripts": {
    "dev": "concurrently --kill-others-on-fail --names backend,ui \"pnpm --filter @middleman/backend dev\" \"pnpm --filter @middleman/ui dev -- --host ${MIDDLEMAN_HOST:-$(node --env-file-if-exists=.env -p 'process.env.MIDDLEMAN_HOST || \"127.0.0.1\"' 2>/dev/null)}\"",
    "dev:backend": "pnpm --filter @middleman/backend dev",
    "dev:ui": "pnpm --filter @middleman/ui dev -- --host ${MIDDLEMAN_HOST:-$(node --env-file-if-exists=.env -p 'process.env.MIDDLEMAN_HOST || \"127.0.0.1\"' 2>/dev/null)}",
    "dev:site": "pnpm --filter @middleman/site dev",
    "build": "pnpm --filter @middleman/backend build && pnpm --filter @middleman/ui build && pnpm --filter @middleman/site build",
    "prod": "pnpm build && pnpm prod:start",
    "prod:start": "concurrently --kill-others-on-fail --names backend,ui \"NODE_ENV=production MIDDLEMAN_PORT=47287 pnpm --filter @middleman/backend start\" \"pnpm --filter @middleman/ui preview -- --port 47289 --strictPort --host ${MIDDLEMAN_HOST:-$(node --env-file-if-exists=.env -p 'process.env.MIDDLEMAN_HOST || \"127.0.0.1\"' 2>/dev/null)}\"",
    "prod:daemon": "node scripts/prod-daemon.mjs",
    "prod:restart": "node scripts/prod-daemon-restart.mjs",
    "test": "pnpm --filter @middleman/backend test && pnpm --filter @middleman/ui test"
  },
  "pnpm": {
    "overrides": {
      "zod": "^4.3.6",
      "@tanstack/router-generator>zod": "3.25.76",
      "@tanstack/router-plugin>zod": "3.25.76",
      "@tanstack/start-plugin-core>zod": "3.25.76"
    }
  },
  "devDependencies": {
    "concurrently": "^9.2.1"
  }
}
